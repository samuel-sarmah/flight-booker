<h1>Book Flight</h1>
<p>
    <strong>Flight Date: </strong><%= @flight.startdatetime.strftime("%b %d, %Y at %H:%M") %><br>
    <strong>From: </strong><%= @flight.departure_airport.airport_code %>
    <strong>To: </strong><%= @flight.arrival_airport.airport_code %>
</p>

<%= form_with model: @booking, url: bookings_path, data-contoller="add-passenger" do |f| %>
    <%= f.hidden_field :flight_id, value: @flight.id %>
    <%= f.hidden_field :passenger_count, value: @passenger_count %>

    <h3>Passenger Information</h3>
    <% @booking.passengers.each_with_index do |passenger, i| %>
        <fieldset>
            <legend>Passenger <%= i + 1%></legend>
            <%= f.fields_for :passengers, passenger do |pf| %>
                <div>
                    <%= pf.label :name, "Full Name" %>
                    <%= pf.text_field :name %>
                </div>
                <div>
                    <%= pf.label :email, "Email" %>
                    <%= pf.email_field :email %>
                </div>
            <% end %>
        </fieldset>
    <% end %><br>

    <%= f.submit "Confirm Booking" %><br><br>
    <div>
        <button>Add Passenger</button>
        <template>
            <fieldset>
                <legend>Additional passenger(s)</legend>
                <%= f.fields_for :passengers, passenger do |pf| %>
                    <div>

                    </div>
                    <div>

                    </div>
                <% end %>
            </fieldset>
        </template>
    </div>
    <br>
    <button><%= link_to "Back", flights_path, class: "btn btn-secondary" %></button>
<% end %>